<html>
<head>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
<style>

</style>

    <title>
        Yeah
    </title>
</head>
    
<body>
<div id="main" class="container">
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js">
    </script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

<script src='handlebars-v3.0.0.js'></script>
<script src='handlebars.form-helpers.js'> </script>
<script id="entry-template" type="text/x-handlebars-template">
<form class="form-horizontal" method="post">
    {{#each this}}
<div class="panel-group" id="accordion-{{blockLabel}}" role="tablist"
     aria-multiselectable="true">
  <div class="panel panel-primary">
    <div class="panel-heading" role="tab" id="heading-{{blockLabel}}">
        <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion-{{blockLabel}}"
               href="#body-{{blockLabel}}" 
               aria-controls="body-{{blockLabel}}" aria-expanded="{{expanded}}">
            {{blockTitle}}
            </a>
        </h4>
    </div>
    <div id="body-{{blockLabel}}" class="panel-collapse collapse in"
         aria-labelledby="heading-{{blockLabel}}" role="tabpanel"
         >
        <div class="panel-body">
    {{#formElements}}
        <div class="form-group">
            <label for="{{label}}" class="control-label col-sm-3">{{label}}</label>
            <div class="col-sm-9">
                
                        <input type='{{type}}' class="form-control" 
                          placeholder='{{stuff}}' id="{{label}}"/>
            </div>
        </div>
    
        <div class="row">
            <div class="col-sm-3"></div>
            <div class="col-sm-9">
                {{longDescription}}
            </div>
        </div>
        <br />
    {{/formElements}}
        </div>
      </div>
  </div>
    <br/>
    {{/each}}
</div>
    <div class="col-sm-3"></div>
    <div class="col-sm-9">
        <button type="submit" class="btn btn-primary btn-lg">Submit</button>
    </div>
    </form>
</script>

<script>
var source = $("#entry-template").html();

var template = Handlebars.compile(source);

// this is a stand-in for data from metadata server
var context = [
    {
        blockTitle: "Basic information",
        blockLabel: "basic-information",
        expanded: "true",
        formElements: 
        [  { 
              label: "Title",
              type: "text",
              stuff: "Title of my data",
              longDescription: "E.g., Data for June, 2014 Journal of Hydrology Paper"

            },
            {
              label: "Date",
              type: "date",
              stuff: "2015/01/01", // will be sent by server to be 'today'
              longDescription: "Either the date data itself created or md create date?"
            } 
        ]
    },
    {
        blockTitle: "Researcher information",
        blockLabel: "researcher-information",
        expanded: "false",
        formElements:
        [
            {
                label: "Researcher Name",
                type: "text",
                stuff: "johnny flynn",
                longDescription: "Name of party who gathered or processed data; may not be metadata creator"
            },
            {
                label: "Researcher Institution",
                type: "text",
                stuff: "UI",
                longDescription: "Affiliation of the investigator"
            } 
        ] 
    }
]; 

var html = template(context);

$("#main").html(html);
</script>


</body>
</html>
